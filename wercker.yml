
box: node:6

build:
  steps:
    - script:
        name: pre-requirements
        code: |
          export NPM_CONFIG_LOGLEVEL=warn
          npm install
          npm install buildgoggles@0.2.0-3
          ./node_modules/buildgoggles/bin/buildgoggles --releaseOwner=ferhimedamine --releaseBranch=master

publish:
  services:
    - id: jgreat/drone-docker
      docker_host: tcp://dind.cloudbuzz.io:80
      username: $DOCKERHUB_USERNAME
      password: $DOCKERHUB_PASSWORD
      repository: ferhimedamine/vote-demo-web
      registry: https://registry.hub.docker.com
